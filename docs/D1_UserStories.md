1. กลุ่มฟังก์ชันสำหรับนักศึกษา (Student)
User Story 1: การเข้าสู่ระบบ
Story: ในฐานะนักศึกษา ฉันต้องการเข้าสู่ระบบด้วยรหัสนิสิต เพื่อเข้าถึงข้อมูลส่วนตัวและรายการค่าใช้จ่ายของฉัน
Acceptance Criteria:
Given: นักศึกษาอยู่ที่หน้า Login และกรอกรหัสนิสิตและรหัสผ่านที่ถูกต้อง
When: กดปุ่ม "เข้าสู่ระบบ"
Then: ระบบตรวจสอบข้อมูลและพานักศึกษาไปยังหน้า Dashboard หลัก
Given: นักศึกษากรอกรหัสผ่านผิด
When: กดปุ่ม "เข้าสู่ระบบ"
Then: ระบบแสดงข้อความเตือน "รหัสผ่านไม่ถูกต้อง" และไม่ให้เข้าสู่ระบบ
Estimate: 3 Story Points
Priority: Must Have (MoSCoW)

User Story 2: การจัดการโปรไฟล์ผู้เช่า
Story: ในฐานะนักศึกษา ฉันต้องการเข้าสู่ระบบด้วยรหัสนิสิต เพื่อเข้าถึงข้อมูลค่าใช้จ่ายและจัดการโปรไฟล์ส่วนตัว
Acceptance Criteria:
Given: นักศึกษาอยู่ที่หน้า Login และกรอกรหัสนิสิตและรหัสผ่านถูกต้อง
When: กดปุ่ม "เข้าสู่ระบบ"
Then: ระบบต้องพานักศึกษาไปยังหน้า Dashboard และแสดงชื่อ-นามสกุลจริง
Given: นักศึกษากรอกข้อมูลไม่ครบถ้วน
When: กดปุ่ม "เข้าสู่ระบบ"
Then: ระบบต้องแสดงข้อความเตือน "กรุณากรอกรหัสนิสิตและรหัสผ่าน"
Estimate: 3 Story Points
Priority: Should Have (MoSCoW)

User Story 3: ตรวจสอบยอดค่าน้ำ-ค่าไฟ และค่าเช่า
Story: ในฐานะนักศึกษา ฉันต้องการดูยอดค้างชำระและดาวน์โหลดใบเสร็จรับเงินอิเล็กทรอนิกส์ (E-Receipt) เพื่อเก็บไว้เป็นหลักฐาน
Acceptance Criteria:
Given: นักศึกษาอยู่ในหน้า "ประวัติการชำระเงิน"
When: เลือกรายการที่ชำระเงินสำเร็จแล้วและกด "ดาวน์โหลดใบเสร็จ"
Then: ระบบสร้างไฟล์ PDF ของใบเสร็จรับเงินที่มีข้อมูลครบถ้วน (ชื่อ, ห้อง, ยอดเงิน)
When: นักศึกษาดูหน้า Dashboard
Then: ระบบต้องแสดงแยกยอดค่าน้ำ ค่าไฟ และค่าเช่าให้เห็นอย่างชัดเจน
Estimate: 3 Story Points
Priority: Must Have (MoSCoW)

User Story 4: การแจ้งชำระเงินและอัปโหลดหลักฐาน (Slip)
Story: ในฐานะนักศึกษา ฉันต้องการอัปโหลดสลิปการโอนเงิน เพื่อยืนยันว่าฉันได้ชำระค่าหอพักแล้ว
Acceptance Criteria:
Given: นักศึกษาอยู่ในหน้า "แจ้งชำระเงิน" และมียอดค้างชำระ
When: นักศึกษาเลือกไฟล์รูปภาพสลิป (JPG/PNG) และกด "ส่งหลักฐาน"
Then: ระบบบันทึกไฟล์สลิปเข้าสู่ฐานข้อมูลและเปลี่ยนสถานะเป็น "รอตรวจสอบ"
Given: นักศึกษาไม่ได้เลือกไฟล์รูปภาพ
When: กดปุ่ม "ส่งหลักฐาน"
Then: ระบบต้องแสดงข้อความเตือนให้แนบไฟล์ก่อนส่ง
Estimate: 5 Story Points
Priority: Must Have (MoSCoW)

User Story 5: ดูประวัติการชำระเงินย้อนหลัง
Story: ในฐานะนักศึกษา ฉันต้องการดูประวัติการจ่ายเงินย้อนหลัง เพื่อตรวจสอบยอดเงินที่เคยจ่ายไปในแต่ละเดือน
Acceptance Criteria:
Given: นักศึกษาอยู่ที่หน้า "ประวัติการชำระเงิน"
When: ระบบแสดงรายการชำระเงินย้อนหลังโดยเรียงจากเดือนล่าสุด
Then: นักศึกษาสามารถเลือกฟิลเตอร์เพื่อดูตามปีหรือสถานะการชำระได้
Estimate: 3 Story Points
Priority: Should Have (MoSCoW)

User Story 6: ดาวน์โหลดใบเสร็จรับเงิน (E-Receipt)
Story: ในฐานะนักศึกษา ฉันต้องการดาวน์โหลดใบเสร็จในรูปแบบไฟล์ PDF เพื่อเก็บไว้เป็นหลักฐานทางการเงิน
Acceptance Criteria:
Given: รายการชำระเงินที่มีสถานะ "ชำระเงินสำเร็จ"
When: นักศึกษากดปุ่ม "ดาวน์โหลดใบเสร็จ"
Then: ระบบสร้างไฟล์ PDF ที่มีตราสัญลักษณ์หอพักและข้อมูลการชำระเงินที่ถูกต้อง
Estimate: 5 Story Points
Priority: Should Have (MoSCoW)

2. กลุ่มฟังก์ชันสำหรับเจ้าหน้าที่หอพัก (Staff)
User Story 7: บันทึกเลขมิเตอร์น้ำ-ไฟ รายเดือน
Story: ในฐานะเจ้าหน้าที่หอพัก ฉันต้องการบันทึกเลขมิเตอร์รายเดือน เพื่อนำไปคำนวณค่าใช้จ่ายของนักศึกษา
Acceptance Criteria:
Given: เจ้าหน้าที่เลือกเลขห้องและเดือนที่ต้องการบันทึก
When: กรอกตัวเลขมิเตอร์ใหม่ลงในระบบ
Then: ระบบต้องคำนวณหน่วยที่ใช้ (เลขใหม่ - เลขเก่า) ให้อัตโนมัติ
Given: เจ้าหน้าที่กรอกเลขมิเตอร์ที่น้อยกว่าเดือนที่แล้ว
When: กดบันทึก
Then: ระบบต้องแจ้งเตือนว่า "ค่าที่กรอกไม่ถูกต้อง" และไม่อนุญาตให้บันทึก
Estimate: 5 Story Points
Priority: Must Have (MoSCoW)

User Story 8: จัดการข้อมูลย้ายเข้า-ย้ายออก
Story: ในฐานะเจ้าหน้าที่หอพัก ฉันต้องการจัดการสถานะห้องพักเมื่อมีนักศึกษาย้ายเข้าหรือออก เพื่อให้ข้อมูลห้องพักเป็นปัจจุบัน
Acceptance Criteria:
Given: มีนักศึกษาใหม่ย้ายเข้า
When: เจ้าหน้าที่ระบุรหัสนิสิตและเลขห้องในระบบ
Then: สถานะห้องนั้นต้องเปลี่ยนจาก "ว่าง" เป็น "ไม่ว่าง" ทันที
When: เจ้าหน้าที่ทำการ Check-out นักศึกษา
Then: ระบบต้องตรวจสอบว่านักศึกษามียอดค้างชำระหรือไม่ก่อนทำการยืนยัน
Estimate: 5 Story Points
Priority: Should Have (MoSCoW)

User Story 9: การแจ้งเตือนยอดค้างชำระ
Story: ในฐานะเจ้าหน้าที่หอพัก ฉันต้องการส่งข้อความแจ้งเตือนไปยังนักศึกษาที่ยังไม่ได้ชำระเงิน เพื่อกระตุ้นให้เกิดการจ่ายเงินตามกำหนด
Acceptance Criteria:
Given: ระบบแสดงรายชื่อนักศึกษาที่เกินกำหนดชำระ (Overdue)
When: เจ้าหน้าที่กดปุ่ม "ส่งการแจ้งเตือนทั้งหมด"
Then: ระบบต้องส่ง Notification หรือ Email ไปยังนักศึกษาเหล่านั้นโดยอัตโนมัติ
Given: เจ้าหน้าที่ต้องการแจ้งเตือนรายบุคคล
When: เลือกห้องที่ต้องการแล้วกด "ส่งคำเตือน"
Then: ระบบต้องบันทึกประวัติว่ามีการส่งคำเตือนไปแล้วกี่ครั้ง
Estimate: 5 Story Points
Priority: Could Have (MoSCoW)

3. กลุ่มฟังก์ชันสำหรับเจ้าหน้าที่การเงิน (Finance)
User Story 10: ตรวจสอบและอนุมัติหลักฐานการโอนเงิน
Story: ในฐานะการเงิน ฉันต้องการตรวจสอบสลิปที่นักศึกษาอัปโหลด เพื่อยืนยันความถูกต้องของยอดเงิน
Acceptance Criteria:
Given: มีรายการแจ้งชำระเงินสถานะ "รอตรวจสอบ"
When: การเงินกด "อนุมัติ" หลังจากตรวจสอบยอดเงินในบัญชีธนาคาร
Then: สถานะของรายการนั้นต้องเปลี่ยนเป็น "ชำระเงินเรียบร้อย" และยอดหนี้ของนักศึกษาต้องลดลง
When: การเงินกด "ปฏิเสธ" พร้อมระบุเหตุผล (เช่น สลิปซ้ำ)
Then: ระบบต้องส่งการแจ้งเตือนกลับไปยังนักศึกษาคนนั้น
Estimate: 8 Story Points
Priority: Must Have (MoSCoW)

User Story 11: การยืนยันยอดเงินเข้าบัญชี
Story: ในฐานะการเงิน ฉันต้องการยืนยันยอดเงินที่เข้าบัญชีธนาคารจริง เพื่อให้มั่นใจว่าตัวเลขในระบบตรงกับยอดเงินในธนาคาร
Acceptance Criteria:
Given: รายการที่ได้รับอนุมัติสลิปแล้ว
When: เจ้าหน้าที่การเงินตรวจสอบ Statement ธนาคารแล้วพบยอดเงินตรงกัน จึงกด "ยืนยันยอดเงินเข้า"
Then: ระบบต้องลงบันทึกในรายงานรายรับว่ายอดนี้ "ตรวจสอบกับธนาคารแล้ว"
Estimate: 5 Story Points
Priority: Should Have (MoSCoW)

User Story 12: การออกใบแจ้งหนี้รายเดือน (Invoice)
Story: ในฐานะการเงิน ฉันต้องการกดสร้างใบแจ้งหนี้สำหรับนักศึกษาทุกคนในครั้งเดียว เพื่อแจ้งยอดที่ต้องชำระ
Acceptance Criteria:
Given: ข้อมูลค่าน้ำ-ไฟ และค่าเช่าถูกบันทึกครบถ้วนแล้ว
When: การเงินเลือก "สร้างใบแจ้งหนี้ประจำเดือน"
Then: ระบบต้องคำนวณยอดรวมของแต่ละห้องและสร้างรายการค้างชำระในบัญชีของนักศึกษาทุกคน
Estimate: 8 Story Points
Priority: Must Have (MoSCoW)

4. กลุ่มฟังก์ชันสำหรับผู้บริหาร (Manager)
User Story 13: ดูรายงานสรุปรายได้ประจำเดือน/ปี
Story: ในฐานะผู้บริหาร ฉันต้องการดูรายงานรายได้รวม เพื่อวิเคราะห์กระแสเงินสดของหอพัก
Acceptance Criteria:
Given: หน้า Dashboard ผู้บริหาร
When: เลือกช่วงเวลาที่ต้องการดูรายงาน
Then: ระบบแสดงกราฟหรือตารางสรุปรายรับแยกตามประเภทค่าใช้จ่าย
Estimate: 13 Story Points
Priority: Should Have (MoSCoW)

User Story 14: ดูสถิติการค้างชำระเงิน
Story: ในฐานะผู้บริหาร ฉันต้องการดูสถิติห้องที่ค้างชำระ เพื่อประเมินความเสี่ยงและออกมาตรการจัดการ
Acceptance Criteria:
Given: หน้ารายงานสถิติหนี้ค้างชำระ
When: ระบบแสดงเปอร์เซ็นต์ห้องที่จ่ายแล้วเทียบกับค้างชำระ
Then: สามารถดูรายชื่อห้องที่ค้างชำระนานที่สุดได้
Estimate: 8 Story Points
Priority: Should Have (MoSCoW)

5. กลุ่มฟังก์ชันสำหรับผู้ดูแลระบบ (Admin)
User Story 15: จัดการข้อมูลห้องพักและราคา
Story: ในฐานะผู้ดูแลระบบ ฉันต้องการกำหนดราคาค่าเช่าและค่าหน่วยน้ำ-ไฟ เพื่อใช้เป็นเกณฑ์ในการคำนวณเงิน
Acceptance Criteria:
When: Admin แก้ไขราคาค่าไฟต่อหน่วยจาก 7 บาท เป็น 8 บาท
Then: การคำนวณใบแจ้งหนี้ในรอบถัดไปต้องใช้ราคาใหม่ทันที
Given: มีการเพิ่มห้องพักใหม่
When: Admin กรอกเลขห้องและประเภทห้อง
Then: ข้อมูลห้องใหม่ต้องปรากฏในระบบให้เจ้าหน้าที่ใช้งานได้
Estimate: 3 Story Points
Priority: Must Have (MoSCoW)

User Story 16: จัดการสิทธิ์และบัญชีผู้ใช้งาน
Story: ในฐานะ Admin ฉันต้องการเพิ่มหรือระงับสิทธิ์การใช้งานของเจ้าหน้าที่ เพื่อความปลอดภัยของข้อมูลในระบบ
Acceptance Criteria:
Given: มีเจ้าหน้าที่การเงินคนใหม่เข้ามาทำงาน
When: Admin สร้าง Account และเลือก Role เป็น "Finance"
Then: บัญชีนั้นต้องเข้าถึงได้เฉพาะฟังก์ชันเกี่ยวกับการเงินเท่านั้น ไม่สามารถเข้าถึงการแก้ราคาค่าเช่าได้
When: เจ้าหน้าที่ลาออก และ Admin กด "ระงับการใช้งาน (Deactivate)"
Then: บัญชีนั้นต้องไม่สามารถ Log-in เข้าสู่ระบบได้อีกต่อไป
Estimate: 5 Story Points
Priority: Must Have (MoSCoW)

